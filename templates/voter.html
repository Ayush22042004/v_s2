{% extends "base.html" %}
{% block content %}
<h2>Voter Panel</h2>
<div class="kanban">
  <div>
    <h3>Ongoing</h3>
    <ul>{% for e in ongoing %}
      <li><strong>{{ e.title or e.category }}</strong> • {{ e.start_time|istfmt }} → {{ e.end_time|istfmt }}
        <form method="POST" action="{{ url_for('vote') }}">
          <input type="hidden" name="election_id" value="{{ e.id }}">
          <label>Choose Candidate</label>
          <select name="candidate_id" required>
            {% for c in candidates if c.election_id == e.id %}
              <option value="{{ c.id }}">{{ c.name }}</option>
            {% endfor %}
          </select>
          <button class="btn primary" type="submit">Vote</button>
        </form>
      </li>
    {% else %}<li class="muted">No ongoing election</li>{% endfor %}</ul>
  </div>
  <div>
    <h3>Upcoming</h3>
    <ul>{% for e in scheduled %}
      <li>{{ e.title or e.category }} • {{ e.start_time|istfmt }}</li>
    {% else %}<li class="muted">None</li>{% endfor %}</ul>
  </div>
  <div>
    <h3>Ended</h3>
    <ul>{% for e in ended %}
      <li>{{ e.title or e.category }} • {{ e.start_time|istfmt }} → {{ e.end_time|istfmt }}
        <a href="{{ url_for('results', election_id=e.id) }}">View Results</a></li>
    {% else %}<li class="muted">None</li>{% endfor %}</ul>
  </div>
</div>
{% endblock %}