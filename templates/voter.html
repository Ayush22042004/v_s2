{% extends "base.html" %}
{% block content %}
<h2>Voter Panel</h2>
{% if not election %}
  <div class="card"><p>No active election right now. Please wait for admin to schedule.</p></div>
{% else %}
  <div class="card">
    <h3>{{ election.title or election.category }} ({{ election.category }})</h3>
    <p class="muted">{{ election.start_time|istfmt }} â†’ {{ election.end_time|istfmt }}</p>
    {% if voted %}
      <p class="muted">You have already voted for this election.</p>
    {% else %}
      <form method="POST" action="{{ url_for('vote') }}">
        <input type="hidden" name="election_id" value="{{ election.id }}">
        <label>Choose Candidate</label>
        <select name="candidate_id" required>
          <option value="" disabled selected>Select</option>
          {% for c in candidates %}
            <option value="{{ c.id }}">{{ c.name }}</option>
          {% endfor %}
        </select>
        <button class="btn primary" type="submit">Submit Vote</button>
      </form>
    {% endif %}
  </div>
{% endif %}
{% endblock %}
