{% extends "base.html" %}
{% block content %}
<h2>Dashboard</h2>
<div class="grid">
  <div class="card">
    {% if user %}
      <p class="muted">Logged in as {{ user.username }} ({{ user.role }})</p>
      {% if user.role == 'admin' %}
        <a class="btn primary" href="{{ url_for('admin') }}">Open Admin</a>
      {% else %}
        <a class="btn primary" href="{{ url_for('voter_panel') }}">Open Voter Panel</a>
      {% endif %}
    {% else %}
      <p>Welcome! Please login or sign up to continue.</p>
    {% endif %}
  </div>
  <div class="card">
    <h3>Recent Elections</h3>
    <ul>
      {% for e in elections %}
        <li><strong>{{ e.title or e.category }}</strong> • {{ e.category }} • {{ e.year or "YYYY" }}<br>
            <span class="muted">{{ e.start_time|istfmt }} → {{ e.end_time|istfmt }}</span></li>
      {% else %}
        <li class="muted">No elections scheduled yet.</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
